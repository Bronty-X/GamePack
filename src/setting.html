<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/setting.css">
</head>
<body>
    <div id="app">
        <div>
            <h2>ゲーム一覧</h2>
            <div class="game-cards">
                <div class="game-card" v-for="game in gameData">
                    <div class="game-card-img" >
                        <img :src="game.thumbnail">
                        <div class="game-card-overlay">
                            <div class="game-card-edit-btn" @click="openEditPage(game.id)">編集</div>
                            <div class="game-card-delete-btn" @click="deleteGame(game.id)">削除</div>
                            
                        </div>
                    </div>
                    <div class="game-card-textarea">
                        <h3 class="game-card-title">{{game.title}} </h3>
                    </div>
                    
                </div>

                <div class="game-card" @click="openAddPage()">
                    <div class="game-card-addnew-img" >
                        <svg xmlns="http://www.w3.org/2000/svg"  fill="currentColor" class="bi bi-plus addnew-icon" viewBox="0 0 16 16">
                            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                        </svg>
                    </div>
                    <h3>新規追加</h3>
                </div>
            </div>
        </div>
        
    </div>
    <script src="lib/vue.global.js"></script>
    <script type="module">
        const { createApp, ref } = Vue
        //import testComponent from './components/topGameCard.js'

        createApp({
            data() {
                return {
                    gameData:[

                    ],
                    items: [{ message: 'Foo' }, { message: 'Bar' }]
                }
            },
            methods: {
                test(){
                    window.electronAPI.openDetail()
                },
                openSetting(){
                    window.electronAPI.openSetting()
                },
                openAddPage(){
                    window.electronAPI.openAddPage()
                },
                openEditPage(id){
                    window.electronAPI.openEditPage(id)
                },
                deleteGame(id){
                    if(window.confirm('削除しますか？')){
                        console.log(id+'を削除')
                        window.electronAPI.deleteGameData(id)
                        window.electronAPI.openSetting()
                        
                    }
                }
            },
            mounted(){
                window.electronAPI.getGameList()
                window.electronAPI.onLoadGameList((event, data) => {
                    console.log(data)
                    this.gameData = data
                })
            }
        }).mount('#app')
    </script>
</body>
</html>